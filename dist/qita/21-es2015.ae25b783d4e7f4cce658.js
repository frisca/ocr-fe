(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"5gXd":function(e,t){e.exports=""},MXJN:function(e,t,n){"use strict";n.r(t);var a=n("mrSG"),s=n("8Y7J"),o=n("SVse"),l=n("iInd"),i=n("XNiG"),c=n("mDEU"),r=n("PSD3"),d=n.n(r),h=n("vgbG"),p=n("T781"),g=n("IheW"),u=n("2Vo4"),b=n("vkgz"),v=n("lJxs"),k=n("SvQm");let m=class{constructor(e,t){this.http=e,this.configService=t,this.dataSource=new u.a(new h.a),this.data=this.dataSource.asObservable(),this.SERVER=this.configService.getSavedServerPath()}updatedDataSelection(e){this.dataSource.next(e)}getAllSeeker(e){let t=null,n=null,a=null,s=null;return Object.keys(e).forEach(a=>{"page"===a&&(t=e[a]),"count"===a&&(n=e[a])}),a=this.SERVER+`/api/trx-user-vacancy/all/seeker/page/${t}/count/${n}`,s=this.http.post(a,{},{observe:"response"}).pipe(Object(b.a)(e=>console.log("raw",e))),s}deleteCV(e){let t=null;Object.keys(e).forEach(n=>{"id"===n&&(t=e[n])});const n=this.SERVER+"/api/trx-user-vacancy/delete/"+t;return this.http.put(n,{},{observe:"response"}).pipe(Object(v.a)(e=>Object.assign({},e)))}};m.ctorParameters=()=>[{type:g.b},{type:k.a}],m=a.a([Object(s.Injectable)({providedIn:"root"}),a.b("design:paramtypes",[g.b,k.a])],m);let f=class{constructor(e,t,n){this.cvListService=e,this.router=t,this.profileService=n,this.maxTotalpage=1,this.action=new i.a}ngOnInit(){this.curPage=1,this.getAllSeeker(this.curPage)}getAllSeeker(e){this.cvListService.getAllSeeker({page:e,count:10}).subscribe(e=>{console.log("res.body",e.body),this.successLoadAllSeeker(e.body)})}successLoadAllSeeker(e){console.log("successLoadAllSeeker ",e),e.totalRow<0||(console.log(e),this.seekers=e.contents,this.maxTotalpage=Math.ceil(e.totalRow/c.c),this.totalItems=e.totalRow,this.itemsPerPage=c.c)}loadPage(e){this.curPage!==this.previousPage&&(this.previousPage=this.curPage,this.getAllSeeker(this.curPage))}download(e,t,n){const a=new h.b;a.id=e,a.typeFile=t,console.log("profile:",a),"cv_bahasa"===t&&(n="cv_bahasa_"+n),"cv_english"===t&&(n="cv_english_"+n),this.profileService.downloadCV(a).subscribe(e=>{if(console.log("data blob ==> ",e),"text/plain"===e.type)return void d.a.fire("File Not Found","Failed Download","error");const t=new Blob([e],{type:"application/text/pdf"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download=n,document.body.append(a),a.click(),a.remove(),window.addEventListener("focus",e=>URL.revokeObjectURL(a.href),{once:!0})})}delete(e){this.cvListService.deleteCV({id:e}).subscribe(e=>{console.log(e),"00"===e.body.errCode?(d.a.fire("Success","CV has deleted.","success"),this.action.next("refresh"),window.location.reload()):d.a.fire("Error","CV has failed delete.","error")})}};f.ctorParameters=()=>[{type:m},{type:l.f},{type:p.a}],f=a.a([Object(s.Component)({selector:"app-cv-list",template:n("lifm"),styles:[n("5gXd")]}),a.b("design:paramtypes",[m,l.f,p.a])],f);const S=[{path:"",component:f}];let y=class{};y=a.a([Object(s.NgModule)({imports:[l.h.forChild(S)],exports:[l.h]})],y);var w=n("ebz3"),P=n("G0yt");n.d(t,"CvListModule",(function(){return x}));let x=class{};x=a.a([Object(s.NgModule)({declarations:[f],imports:[o.CommonModule,y,w.a,P.f]})],x)},lifm:function(e,t){e.exports='<div class="row">\n    \x3c!-- [ basic-table ] start --\x3e\n    <div class="col-md-12">\n      <app-card [hidHeader]="true">\n        <h5>CV List </h5>\n        <hr>\n        <div class="table-responsive" style="margin-top:10px;">\n          <table class="table">\n            <thead>\n            <tr>\n              <th>ID</th>\n              <th>Name</th>\n              <th>CV English</th>\n              <th>CV Bahasa</th>\n              <th>Action</th>\n            </tr>\n            </thead>\n            <tbody *ngFor="let seeker of seekers; let i=index">\n                <tr>\n                <td>{{seeker.id}}</td>\n                <td>{{seeker.firstName}} - {{seeker.lastName}}</td>\n                <td>\n                    <a class="feather icon-download" (click)="download(seeker.id, \'cv_english\', seeker.cvEnglish)"> {{seeker.cvEnglish}}\n                    </a> \n                </td>\n                <td>\n                    <a class="feather icon-download" (click)="download(seeker.id, \'cv_bahasa\', seeker.cvBahasa)"> {{seeker.cvBahasa}}\n                    </a> \n                </td>\n                <td>\n                    <button class="btn btn-danger" (click)="delete(seeker.id)">Delete</button>\n                </td>\n                </tr>\n            </tbody>\n            <tfoot class="grey lighten-5 ">\n                <tr>\n                    <td colspan="12">\n                            Page {{curPage}} Of {{maxTotalpage}}<br>\n                            \x3c!-- <button mdbBtn type="button" color="red" size="sm" outline="true" rounded="true"\n                                (click)="onPreviousPageClick()">\n                                <mdb-icon fas icon="angle-left"></mdb-icon>\n                            </button>\n                            <ul style="display: inline-block" class="pagination pagination-circle pg-red"\n                                *ngFor="let tl of total">\n                                <li class="page-item" *ngIf="tl != curPage">\n                                    <a class="page-link" (click)="onClick(tl)">{{tl}}</a>\n                                </li>\n                                <li class="page-item active" *ngIf="tl == curPage">\n                                    <a class="page-link" (click)="onClick(tl)">{{tl}}</a>\n                                </li>\n                            </ul>\n                            <button mdbBtn type="button" color="red" size="sm" outline="true" rounded="true"\n                                (click)="onNextPageClick()">\n                                <mdb-icon fas icon="angle-right"></mdb-icon>\n                            </button> --\x3e\n                            <ngb-pagination [collectionSize]="totalItems" [(page)]="curPage"  [maxSize]="5" \n                            [rotate]="true" [pageSize]="itemsPerPage" [boundaryLinks]="true" [ellipses]="false" \n                            (pageChange)="loadPage($event)">\n                            </ngb-pagination>\n                    </td>\n                </tr>\n            </tfoot>\n          </table>\n        </div>\n      </app-card>\n    </div>\n</div>'}}]);